â•”â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•—
â•‘   âœ… SISTEMA DE MIGRAÃ‡Ã•ES AUTOMÃTICAS CONFIGURADO            â•‘
â•šâ•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•

ğŸ“‹ O QUE FOI IMPLEMENTADO:

1. âœ… Script de MigraÃ§Ã£o AutomÃ¡tica
   â””â”€ scripts/migrate_database.sh
   â””â”€ Cria tabelas via SQLAlchemy ORM
   â””â”€ Aplica migrations SQL
   â””â”€ Controle de versÃ£o (evita duplicatas)

2. âœ… Docker Entrypoint
   â””â”€ docker-entrypoint.sh
   â””â”€ Roda migrations antes de iniciar API
   â””â”€ ConfigurÃ¡vel via RUN_MIGRATIONS=true

3. âœ… Workflow de Deploy Atualizado
   â””â”€ .github/workflows/deploy.yml
   â””â”€ Executa migrations automaticamente
   â””â”€ Antes de iniciar aplicaÃ§Ã£o

4. âœ… Dockerfile Atualizado
   â””â”€ Inclui entrypoint
   â””â”€ Configura migrations automÃ¡ticas

5. âœ… DocumentaÃ§Ã£o Completa
   â””â”€ docs/DATABASE_MIGRATIONS.md
   â””â”€ README.md atualizado
   â””â”€ scripts/README.md atualizado

â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•

ğŸ¯ COMO FUNCIONA:

1. Push/Merge para main
   â†“
2. GitHub Actions faz deploy
   â†“
3. Migrations rodam automaticamente
   â”œâ”€ Cria tabelas (SQLAlchemy)
   â”œâ”€ Aplica migrations SQL
   â””â”€ Verifica integridade
   â†“
4. AplicaÃ§Ã£o inicia
   â†“
5. âœ… Deploy completo com banco configurado!

â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•

ğŸ“Š TABELAS CRIADAS AUTOMATICAMENTE:

âœ“ users                     - UsuÃ¡rios
âœ“ agents                    - Agentes de IA
âœ“ password_reset_tokens     - Reset de senha
âœ“ mcp_connections           - ConexÃµes MCP
âœ“ file_search_stores        - Busca de arquivos
âœ“ file_search_files         - Arquivos indexados
âœ“ conversation_sessions     - SessÃµes de conversa
âœ“ conversation_messages     - Mensagens
âœ“ schema_migrations         - Controle de migrations

â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•

ğŸ”„ MIGRATIONS SQL ADICIONAIS:

Se houver arquivos .sql em migrations/:
âœ“ Aplicados automaticamente apÃ³s tabelas criadas
âœ“ Registrados em schema_migrations
âœ“ Nunca reaplicados (controle de versÃ£o)

Exemplo: migrations/add_new_column.sql
â””â”€ Aplicado automaticamente no prÃ³ximo deploy

â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•

ğŸ› ï¸ COMANDOS ÃšTEIS:

# Rodar migrations manualmente
./scripts/migrate_database.sh

# Ver status das tabelas
docker exec -it agents_postgres psql -U agentuser -d agentsdb
\dt

# Ver migrations aplicadas
SELECT * FROM schema_migrations;

# Deploy com migrations
./scripts/deploy_manual.sh

â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•

âœ¨ VOCÃŠ NÃƒO PRECISA:

âŒ Criar tabelas manualmente
âŒ Rodar migrations manualmente
âŒ Executar init_db.py
âŒ Aplicar SQL manualmente

TUDO Ã‰ AUTOMÃTICO! ğŸ‰

â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•

ğŸ“– DOCUMENTAÃ‡ÃƒO:

Ver: docs/DATABASE_MIGRATIONS.md

â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
